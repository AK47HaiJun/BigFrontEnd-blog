## React Native ä¹‹æ—…

### React Native è¸©å‘å¼€å§‹

> 5.1 å‡æœŸ å°±è¿™æ ·çŸ­æš‚çš„ç»“æŸäº†ï¼Œä½ éƒ½å¹²å•¥äº†ï¼Ÿ 
>
> ğŸ˜‚ï¼Œæˆ‘å˜›åŠ äº†3å¤©ç­ï¼Œä½ ä»¬å‘¢ï¼Ÿ
>
> 
>
> â€‹       æœ€è¿‘å…¬å¸æœ‰ä¸ªReact Native é¡¹ç›®ï¼Œä¸å¾—ä¸å­¦ä¹ ä¸‹RNäº†ã€‚ç”±äºä¹‹å‰å­¦è¿‡Reactï¼Œå­¦React Native è¿‡ç¨‹è¿˜ç®—å¯ä»¥ï¼Œä¸å¤ªè‰°éš¾ã€‚
>
> å­¦ä¹ React Native è¸©äº†å¥½å¤šå‘ï¼Œæ€»ç»“æ–‡ç« ï¼Œä»¥ä¾¿åˆ«çš„å°ä¼™ä¼´å¼€å‘RN,å¯ä»¥è½»æ¾ä¸Šæ‰‹ï¼Œå‡å°‘è¸©å‘ã€‚ğŸ˜‚

<hr>

#### React Native  ç¯å¢ƒ å®‰è£…(å¿…é¡»æŒ‰ç…§ä»¥ä¸‹3ä¸ªè¦æ±‚é…ç½®å®‰è£…ï¼Œå¦åˆ™ä¼šç¯å¢ƒé”™è¯¯)

- ##### Python 2.x ï¼Œ å¿…é¡»å®‰è£…2.x çš„ç‰ˆæœ¬ã€‚ 

- ##### Nodeï¼Œ ç‰ˆæœ¬å¿…é¡»åœ¨12æˆ–è€…å¤§äº12

- ##### Java JDK ç¯å¢ƒ å¿…é¡»ä¸º 1.8 ç‰ˆæœ¬

<img src="https://s1.ax1x.com/2020/05/05/Ykm5nI.png">

<center><h3>ç¼ºå°‘Python ç¯å¢ƒ</h3></center>

#### é¡¹ç›®ä¾èµ–å®‰è£…å·¥å…·

- ##### é¦–é€‰ yarn ï¼Œå®‰è£…å›½å¤–èµ„æºä¾èµ–å¿«

- ##### Npmï¼Œ ä¸‹è½½é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œå¯ä»¥è®¾ç½®æ·˜å®æºï¼ŒåŠ å¿«é€Ÿåº¦

#### æ‰‹æœºæ¨¡æ‹Ÿå™¨ è°ƒè¯•

- ##### å®‰è£… Android Studio  ï¼ˆéœ€è¦é…ç½®AS çš„ç¯å¢ƒï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ï¼‰

- ##### å¤œæ·±æ¨¡æ‹Ÿå™¨  

- ##### å…¶å®ƒæ¨¡æ‹Ÿå™¨

<hr/>

#### å®‰è£… React Native è„šæ‰‹æ¶

> æˆ‘ä¹‹å‰æ˜¯æŒ‰ç…§å®˜æ–¹æä¾›çš„è„šæ‰‹æ¶å®‰è£…çš„ï¼Œå‡ºç°å„ç§å‘ï¼Œåˆ›å»ºå¥½äº†é¡¹ç›®ï¼Œå¯åŠ¨é¡¹ç›®ï¼Œå„ç§æŠ¥é”™ï¼Œæœ€åå„ç§ç™¾åº¦ï¼Œæ²¡æœã€‚
>
> åæ¥é€‰æ‹©äº†EXPOï¼Œå¯çœŸé¦™ã€‚



##### å®˜æ–¹æä¾› è„šæ‰‹æ¶

``````javascript
1. å…¨å±€å®‰è£…è„šæ‰‹æ¶
npm uninstall -g react-native-cli
2. åˆ›å»ºæ–°é¡¹ç›®
react-native init  ProjectName
3. yarn start
``````

#### å®‰è£… EXPO è„šæ‰‹æ¶

##### ä»€ä¹ˆæ˜¯EXPO

> [Expo](http://expo.io/)æ˜¯é€šç”¨Reactåº”ç”¨ç¨‹åºçš„æ¡†æ¶å’Œå¹³å°ã€‚å®ƒæ˜¯å›´ç»•React Nativeå’Œæœ¬æœºå¹³å°æ„å»ºçš„ä¸€ç»„å·¥å…·å’ŒæœåŠ¡ï¼Œå¯å¸®åŠ©æ‚¨ä»åŒä¸€JavaScript / TypeScriptä»£ç åº“åœ¨iOSï¼ŒAndroidå’ŒWebåº”ç”¨ç¨‹åºä¸Šå¼€å‘ï¼Œæ„å»ºï¼Œéƒ¨ç½²å’Œå¿«é€Ÿè¿­ä»£ã€‚

##### å®‰è£…è„šæ‰‹æ¶

```javascript
1. å…¨å±€å®‰è£… EXPO
 æ¨èç”¨ yarn å®‰è£…//  
 npm install --global expo-cli
ï¼ˆå½“æ—¶ç”¨npmï¼Œå®‰è£…äº†åŠä¸ªå°æ—¶ï¼Œä¹Ÿæ²¡å®‰è£…å®Œ......ğŸ˜­ï¼‰

2. åˆ›å»ºé¡¹ç›®
expo init my-project

```

#### EXPO æä¾›äº† å¾ˆæ–¹ä¾¿å¼€å‘ä¾¿æ·

> ä»é¡¹ç›®çš„å¼€å‘ åˆ° æœ€ç»ˆçš„ä¸Šçº¿ï¼Œ éƒ½å¾ˆè½»æ¾ã€‚
>
> å½“ä½ æƒ³æ‰“åŒ…ä½ çš„App æˆAPK æ–‡ä»¶ï¼š
>
> â€‹	ä½ å¯ä»¥æ˜¯ä½¿ç”¨EXPO æä¾›çš„ æŒ‡ä»¤ï¼š `expo build:android`   
>
> æ‰“åŒ…çš„æ—¶å€™ï¼Œä¼šéœ€è¦EXPOçš„è´¦æˆ·ï¼Œ å› ä¸ºå®ƒä¼šå‘å¸ƒåˆ°ä½ EXPOè´¦æˆ·ä¸‹ï¼Œç”ŸæˆAPK æ–‡ä»¶ ï¼Œå‘å¸ƒåˆ°åº”ç”¨å•†åŸï¼Œéœ€è¦è¯ä¹¦æˆ–è€…èµ„æ–™ï¼Œ å®ƒä¼šç»™ä½ ç”Ÿæˆä¸€ä¸ªï¼Œ å®Œå…¨ä¸ç”¨æˆ‘ä»¬æ“å¿ƒï¼Œåªå…³æ³¨ç¼–ç ã€‚

#### å…‰è¯´ä¸ç»ƒ  çº¯è€æµæ°“ï¼Œä¸‹é¢ä¸ºEXPO æ“ä½œæ¼”ç¤º

##### åˆ›å»ºé¡¹ç›®

<img src="https://s1.ax1x.com/2020/05/05/Yki6DU.png" >

##### ä¸‹è½½ä¾èµ–ä¼šéœ€è¦ä¸€æ®µæ—¶é—´

<img src="https://s1.ax1x.com/2020/05/05/YkF7zq.png">

#### EXPO é¡¹ç›®ä»‹ç»

<img src="https://s1.ax1x.com/2020/05/05/YkEexI.png">



#### å¯åŠ¨é¡¹ç›® `yarn start` 

> å¯åŠ¨æˆåŠŸåï¼Œå®ƒä¼šå¼€å¯ä¸€ä¸ªæœåŠ¡ï¼Œä¼šè‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªç½‘é¡µï¼Œåœ¨è¿™ä¸ªç½‘é¡µä¸­ï¼Œä½ åªéœ€è¦æŠŠä½ çš„ æ‰‹æœºæ¨¡æ‹Ÿå™¨ æˆ–è€… çœŸæœº è¿ç€ç”µè„‘ï¼Œ ç„¶å ç‚¹å‡» `Run on Android device` å°±å¯ä»¥è¿è¡Œåœ¨æ‰‹æœºä¸Šäº†ã€‚
>
> æ˜¯ä¸æ˜¯å¾ˆè½»æ¾å“ˆï¼Œä½¿ç”¨å®˜æ–¹æä¾›çš„ï¼Œä½ çš„è‡ªå·±é…ç½®ï¼ŒæŸ¥æ‰¾æ¨¡æ‹Ÿå™¨ã€‚ğŸ˜

â€‹	

<img src="https://s1.ax1x.com/2020/05/05/Yke9rq.png">

#### React Native æ”¯æŒçƒ­æ›´æ–°

> è¿™æ ·å¾ˆæ–¹ä¾¿æˆ‘ä»¬å¼€å‘APP ä¸­è°ƒè¯•ï¼Œ æ•°æ®æ”¹å˜ï¼Œ è§†å›¾åŒæ—¶æ”¹å˜ã€‚

#### æ‰“åŒ…é¡¹ç›®

> ç”±äºæˆ‘æ˜¯Windows ç¯å¢ƒï¼Œåœ¨è¿™é‡Œå°±åªä»‹ç» å¦‚ä½•æ‰“åŒ… Android  APK æ–‡ä»¶äº†ã€‚
>
> IOS æ‰“åŒ… å»å®˜æ–¹è¯»æ–‡æ¡£ä¹Ÿå¯ä»¥ï¼Œæ–‡æ¡£å¯èƒ½å¯¹å›½äººä¸å¤ªå‹å¥½ï¼Œçº¯è‹±æ–‡ï¼Œç¿»è¯‘å·¥å…·å¯ä»¥å¸®åˆ°æˆ‘ä»¬ã€‚

<img src="https://s1.ax1x.com/2020/05/05/YkuXmn.png">

<center><h3>æ‰“åŒ…æˆåŠŸï¼Œå®ƒä¼šæä¾›ä¸€ä¸ªé“¾æ¥ï¼Œå»è¿™ä¸ªé“¾æ¥ä½ å°±å¯ä»¥ä¸‹è½½æ‰“åŒ…åçš„APK æ–‡ä»¶</h3></center>



#### ä¸‹è½½APK 

<img src="https://s1.ax1x.com/2020/05/05/YkK80I.jpg">

##### æ˜¾ç¤ºæ•ˆæœ

<img src="https://s1.ax1x.com/2020/05/05/YkKrBn.jpg">





### åˆ°æ­¤è¯¥ç»“æŸäº†

> æœ¬ç« ä»‹ç»äº†ï¼Œå¦‚ä½•é…ç½®React Native ç¯å¢ƒï¼Œ ä»¥åŠEXPO ç¥å™¨å¦‚ä½•ä½¿ç”¨ï¼Œä» 0 åˆ°  æ‰“åŒ…æˆ APK æ–‡ä»¶æµç¨‹ã€‚
>
> ä¸­é—´æˆ‘è¸©äº†å¾ˆå¤šå‘ï¼Œå†™æ–‡ç« è®°å½•ä¸‹æ¥ï¼Œåˆ«çš„æœ‹å‹å°±å¯ä»¥å‡å°‘è¸©å‘çš„æ—¶é—´ï¼Œä¸“æ³¨ä¸šåŠ¡å¼€å‘æ–¹é¢ï¼Œä»è€Œå¼€å‘å‡ºä¼˜è´¨çš„APP åº”ç”¨ã€‚

<img src="https://s1.ax1x.com/2020/05/05/Yk1CU1.jpg">



<center><h3>ç¥å¤§å®¶ï¼Œ5.1 å¿«ä¹</h3></center>



#### åŠ¨ç”»å…¥é—¨ä½¿ç”¨

> 1.  å¯¼å…¥ åŠ¨ç”»åº“ï¼Œ ä¸éœ€è¦å®‰è£…ã€‚
>
>    `import { Animated} from 'reac-native';`
>
> 2.  è®¾ç½®åŠ¨ç”»çŠ¶æ€
>
>    ```react
>    state = {
>    
>    â€‹	top:  new  Animated.Value(900)
>    
>    }
>    ```
>
>    
>
> 3. åˆ›å»ºåŠ¨ç”»åº”ç”¨äºè§†å›¾ä¸­
>
>    ```javascript
>    const AnimatedContainer =  Animated.createAnimatedComponent(Container)`
>    
>    `Container`  ä¸º è‡ªå®šä¹‰çš„æ ·å¼ç»„ä»¶
>    ```
>
>    
>
> 4. å°†åŠ¨ç”»çŠ¶æ€åº”ç”¨äºæ ·å¼ç»„ä»¶ä¸­
>
>    ```react
>      <AnimatedContainer style={{ top: this.state.top}}>
>                 
>       </AnimatedContainer>
>    ```
>
> 5. ç»™åŠ¨ç”»æ·»åŠ æ‰§è¡Œäº‹ä»¶
>
>    ```react
>    componentDidMount(){
>            Animated.spring(this.state.top,{
>                toValue:0
>            }).start()
>        }
>    ```
>
>    

##### å®Œæ•´ä»£ç 

```react
import React from 'react';
import styled from 'styled-components';
import { Animated } from 'react-native';

class Menu extends React.Component {

    state = {
        top: new Animated.Value(900)
    }

    componentDidMount() {
        Animated.spring(this.state.top, {
            toValue: 0
        }).start()
    }

    render() {
        return (
            <AnimatedContainer style={{ top: this.state.top }}>
                <Cover></Cover>

            </AnimatedContainer>
        );
    }
}

export default Menu;


const Container = styled.View`
position:absolute;
background:white;
width:100%;
height:100%;
z-index:100;
`

const AnimatedContainer = Animated.createAnimatedComponent(Container)

const Cover = styled.View`
width:100%;
height:200px;
background:deepskyblue;


`
```

##### æ•ˆæœå¦‚ä¸‹

<img src="https://s1.ax1x.com/2020/05/03/JzRz1s.gif">

##### å¼¹èµ·Menuçš„é«˜åº¦ï¼Œè‡ªè®¾é…æœºå‹é«˜åº¦

```javascript
1. ä» react-native ä¸­ å¼•å…¥ Dimensionsï¼Œ
import { Animated, Dimensions} from 'react-native';

2. åŠ¨æ€è·å–å±å¹•é«˜åº¦
const screenHeight = Dimensions.get("window").height;

3.æ”¹å˜åŠ¨ç”»è§†å›¾é«˜åº¦
    state = {
        top: new Animated.Value(screenHeight)
    }

4.æ”¹å˜äº‹ä»¶ä¸­é«˜åº¦
    toggleMenu = () => {
        Animated.spring(this.state.top, {
            toValue: screenHeight
        }).start()
    }
5. åŠ¨æ€ä¿®æ”¹æ ·å¼ç»„ä»¶ä¸­çš„ è§†å›¾çš„é«˜åº¦ï¼Œ é€šè¿‡ $ {} ï¼Œæ¥ä¿®æ”¹
        const Container = styled.View`
        position:absolute;
        background:white;
        width:100%;
        height:${screenHeight};
        z-index:100;
      `
        
        
6.å¤§åŠŸå‘Šæˆï¼Œ ä¸ç®¡æ˜¯ä»€ä¹ˆæœºå‹éƒ½é€‚é…        
```

#### Redux

##### 1. å®‰è£…ä¾èµ–

```javascript
yarn add  redux -s

yarn add react-redux -s
```

##### 2.  åœ¨å…¥å£æ–‡ä»¶ app.js ä½¿ç”¨

```react
import React from 'react'
import { createStore } from 'redux'
//ä½¿ç”¨Providerè¾¾åˆ°æ•°æ®å…±äº«
import { Provider } from 'react-redux'
import HomeScreen from './screen/HomeScreen'


// å­˜å‚¨ç»„ä»¶çŠ¶æ€
const initialState = {
  action: "",
  test:"æµ‹è¯•"
};


// reducer å¤„ç†çŠ¶æ€,å°†çŠ¶æ€è¿”å›åˆ°ç»„ä»¶ä¸­ä½¿ç”¨
// reducer ä¼ é€’ä¸¤ä¸ªå‚æ•° ä¸€ä¸ªä¸º state çŠ¶æ€,  ç¬¬äºŒä¸ªå‚æ•°ä¸º action æ”¹å˜state
const reducer = (state = initialState, action) => {
  // é€šè¿‡æ¥æ”¶action.type æ¥ å¤„ç†ç›¸åº”çš„ç»„ä»¶éœ€è¦çš„stateçŠ¶æ€
  switch (action.type) {
    case 'CLOSE_MENU':
      return { action: 'closeMenu' }
      
    case 'OPEN_MENU':
      return { aciton: 'openMenu' }
    case 'CHANGE_TEXT':
      return { test : 'ä¿®æ”¹æˆåŠŸ'} 
    default:
      return state
  }

}

// åˆ›å»ºstore ä»“åº“
const store = createStore(reducer);

const App = () => (
  //  ä½¿ç”¨ Provider åŒ…è£¹ç»„ä»¶ï¼Œ ä¼ é€’storeï¼Œ æ‰€æœ‰ç»„ä»¶å¯ä½¿ç”¨ storeä¸­å‚æ•°å’Œreducer
  <Provider store={store}>
    <HomeScreen />
  </Provider>
)

export default App;
```

##### 3. ç»„ä»¶è·å–state

```react
// 1.ç¬¬ä¸€æ­¥å¿…é¡» å¼•å…¥ import { connect } from 'react-redux';
import { connect } from 'react-redux';


//2. é€šè¿‡  mapStateToProps(state) æ¥è·å–storeä¸­çš„state


//  é€šè¿‡React-redux çš„ mapStateToProps æ¥ä¼ é€’storeä¸­çš„ state æ¥ ç»™ç»„ä»¶ä½¿ç”¨
function mapStateToProps(state){
    // é€šè¿‡ stateã€‚æ¥è·å–ç»„ä»¶éœ€è¦çš„ stateï¼Œæœ€åè¿”å›ï¼Œ
    //  å› ä¸º ä½¿ç”¨connnect è¿æ¥äº† mapStateToProps,å¹¶ä¸”ä¹Ÿç»‘å®šäº† ç»„ä»¶ï¼Œ æ‰€ä»¥ç»„ä»¶å’Œ store æ˜¯å…±äº«æ•°æ® ä½¿ç”¨çš„
    return {action: state.action}
}




//3. ç»„ä»¶ä¸­ä½¿ç”¨state
this.props. [mapStateToPropsè¿”å›çš„å¯¹è±¡]
```

##### 4. æ”¹å˜stateï¼Œ dispatch

```react
//1. é€šè¿‡react-reudx çš„ mapDispatchToProps å‡½æ•°æ¥ å‡ºå‘ reducer æ¥æ”¹å˜stateçŠ¶æ€ï¼Œé€šè¿‡æŒ‡å®š action çš„typeï¼Œ
//  ç„¶ååœ¨ store ä¸­åˆ¤æ–­action.type æ¥å¤„ç† ç›¸åº”çš„ä¸šåŠ¡
function mapDispatchToProps(dispatch) {
    return {
        closeMenu: () => 
            dispatch({
                type: "CLOSE_MENU"
            })
    } 
}



//2ï¼Œé€šè¿‡åœ¨ æ§ä»¶ä¸Šç»‘å®šäº‹ä»¶ï¼Œè§¦å‘ mapDispatchToProps å‡½æ•°ä¸­è¿”å›çš„å‡½æ•°
```

##### 5.  ä½¿ç”¨connect è¿æ¥ stateå’Œactionï¼Œç»‘å®šç»„ä»¶

```react
//  é‡ç‚¹:
//      è¦æƒ³ç»™ç»„ä»¶ä¼ é€’state æˆ–è€… æ”¹å˜ state, å¿…é¡»é€šè¿‡react-redux çš„ connect è¿æ¥  mapStateToProps , mapDispatchToProps å‡½æ•°, å¹¶ä¸”ç»‘å®šç»„ä»¶
export default connect(mapStateToProps,mapDispatchToProps)(Menu);
```





<hr/>

#### Fetch è¯·æ±‚

> ReactNative ä¸­è¯·æ±‚æ¥å£çš„åº“ã€‚ å®ƒæä¾›äº†ä¸€ä¸ª JavaScript æ¥å£ï¼Œç”¨äºè®¿é—®å’Œæ“çºµ HTTP ç®¡é“çš„ä¸€äº›å…·ä½“éƒ¨åˆ†ï¼Œä¾‹å¦‚è¯·æ±‚å’Œå“åº”ã€‚å®ƒè¿˜æä¾›äº†ä¸€ä¸ªå…¨å±€ [`fetch()`](https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalFetch/fetch) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æä¾›äº†ä¸€ç§ç®€å•ï¼Œåˆç†çš„æ–¹å¼æ¥è·¨ç½‘ç»œå¼‚æ­¥è·å–èµ„æºã€‚

##### ä½¿ç”¨

```javascript
fetch('æ¥å£url')
    .then(
    response => {
    // 1.è·å–JSONå†…å®¹ï¼Œ ç¬¬ä¸€æ­¥éœ€è¦è½¬æ¢æˆ jsonæ•°æ®
      response = response.json()
})
  .then(
    response => {
        //åˆ‡è®°ï¼Œç”±äºè¿™å—è¦å°†æ•°æ®èµ‹å€¼ç»™stateï¼ŒRNçš„æ‰§è¡Œé¡ºåºæ˜¯ï¼š
        //ç”±äºè¯·æ±‚æ˜¯å¼‚æ­¥åŠ è½½ï¼Œè€Œrenderæ¸²æŸ“åœ¨å¼‚æ­¥å‰ï¼Œæ•°æ®èµ‹å€¼æ˜¯ä¸èƒ½çš„ï¼Œç›´æ¥æŠ¥é”™ï¼Œæ²¡æœ‰èµ‹å€¼ä¸Šå»ã€‚
        // 2. âœ” æ­£ç¡®çš„è§£å†³åŠæ³•ï¼ŒReactä¸­æä¾›äº†ï¼Œåœ¨ç»™å¼‚æ­¥èµ‹å€¼æ—¶ï¼Œ ä¼ é€’ä¸€ä¸ªç©ºå¯¹è±¡å³å¯
        
            this.setState(() => {
                return { info: response.article }
            })
    }
			

);
```

<img src="https://s1.ax1x.com/2020/05/04/YCYRAI.png">

##### æ¸²æŸ“ç»“æœ

<img src="https://s1.ax1x.com/2020/05/04/YCtPb9.png">





> æœ¬æ–‡å°±ä¸è¿‡å¤šè®²æœ‰å…³Fetchå†…å®¹ï¼Œä¸»è¦ä»¥å¯ä»¥åœ¨RN ä¸­å¿«é€Ÿå¯ä»¥è¯·æ±‚ï¼Œæ‹¿åˆ°æ•°æ®ï¼Œæ¸²æŸ“ä¸ºä¾‹ã€‚
>
> æ›´å¤šæœ‰å…³Fetchä½¿ç”¨åœ¨ä¸‹é¢é“¾æ¥
>
> https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch

#### å¯¼èˆªNavigation



> å®‰è£… Navigation 
>
> `npm install -s react-navigation`